{"ast":null,"code":"import _objectDestructuringEmpty from\"D:/Code/HTML/BlogProject/client/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";import _defineProperty from\"D:/Code/HTML/BlogProject/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"D:/Code/HTML/BlogProject/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Code/HTML/BlogProject/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import Axios from'axios';import serverUrl from'../common';var userUrl='api/user';export var getUserByUsernameAsync=createAsyncThunk('api/user/getUserByUsernameAsync',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref){var username,response,tasks;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:username=_ref.username;_context.next=3;return Axios.get(\"\".concat(serverUrl).concat(userUrl,\"/get-user-by-username?username=\").concat(username));case 3:response=_context.sent;tasks=response.data;return _context.abrupt(\"return\",{tasks:tasks});case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());export var updateUserAsync=createAsyncThunk('',/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_ref3){var id,userReq,formData,response,tasks;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:id=_ref3.id,userReq=_ref3.userReq;formData=new FormData();userReq.name&&formData.append('name',userReq.name);userReq.alias&&formData.append('alias',userReq.alias);userReq.gender&&formData.append('gender',userReq.gender);userReq.date&&formData.append('date',userReq.date);userReq.tel&&formData.append('tel',userReq.tel);userReq.job&&formData.append('job',userReq.job);userReq.address&&formData.append('address',userReq.address);userReq.email&&formData.append('email',userReq.email);userReq.profilepic&&formData.append('profilepic',userReq.profilepic);userReq.upperpic&&formData.append('upperpic',userReq.upperpic);userReq.lowerpic&&formData.append('lowerpic',userReq.lowerpic);console.log(userReq.profilepic);_context2.next=16;return Axios.put(\"\".concat(serverUrl).concat(userUrl,\"/update-user?id=\").concat(id),formData);case 16:response=_context2.sent;tasks=response.data;return _context2.abrupt(\"return\",{tasks:tasks});case 19:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref4.apply(this,arguments);};}());export var userSlice=createSlice({name:'user',initialState:{user:null},reducers:{},extraReducers:_defineProperty({},getUserByUsernameAsync.fulfilled,function(state,action){console.log('get user by username successfully');// state.user = action.payload.tasks;\nreturn action.payload.tasks.result;})});_objectDestructuringEmpty(userSlice.actions);export{};export var selectUser=function selectUser(state){return state.user.user;};export default userSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","Axios","serverUrl","userUrl","getUserByUsernameAsync","username","get","response","tasks","data","updateUserAsync","id","userReq","formData","FormData","name","append","alias","gender","date","tel","job","address","email","profilepic","upperpic","lowerpic","console","log","put","userSlice","initialState","user","reducers","extraReducers","fulfilled","state","action","payload","result","actions","selectUser","reducer"],"sources":["D:/Code/HTML/BlogProject/client/src/features/user/userSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport Axios from 'axios';\r\nimport serverUrl from '../common';\r\n\r\nconst userUrl = 'api/user';\r\n\r\nexport const getUserByUsernameAsync = createAsyncThunk(\r\n    'api/user/getUserByUsernameAsync',\r\n    async ({ username }) => {\r\n        const response = await Axios.get(\r\n            `${serverUrl}${userUrl}/get-user-by-username?username=${username}`\r\n        );\r\n        const tasks = response.data;\r\n        return { tasks };\r\n    }\r\n);\r\n\r\nexport const updateUserAsync = createAsyncThunk('', async ({ id, userReq }) => {\r\n    const formData = new FormData();\r\n    userReq.name && formData.append('name', userReq.name);\r\n    userReq.alias && formData.append('alias', userReq.alias);\r\n    userReq.gender && formData.append('gender', userReq.gender);\r\n    userReq.date && formData.append('date', userReq.date);\r\n    userReq.tel && formData.append('tel', userReq.tel);\r\n    userReq.job && formData.append('job', userReq.job);\r\n    userReq.address && formData.append('address', userReq.address);\r\n    userReq.email && formData.append('email', userReq.email);\r\n    userReq.profilepic && formData.append('profilepic', userReq.profilepic);\r\n    userReq.upperpic && formData.append('upperpic', userReq.upperpic);\r\n    userReq.lowerpic && formData.append('lowerpic', userReq.lowerpic);\r\n    console.log(userReq.profilepic);\r\n    const response = await Axios.put(\r\n        `${serverUrl}${userUrl}/update-user?id=${id}`,\r\n        formData\r\n    );\r\n    const tasks = response.data;\r\n    return { tasks };\r\n});\r\n\r\nexport const userSlice = createSlice({\r\n    name: 'user',\r\n    initialState: {\r\n        user: null,\r\n    },\r\n    reducers: {},\r\n    extraReducers: {\r\n        [getUserByUsernameAsync.fulfilled]: (state, action) => {\r\n            console.log('get user by username successfully');\r\n            // state.user = action.payload.tasks;\r\n            return action.payload.tasks.result;\r\n        },\r\n    },\r\n});\r\n\r\nexport const {} = userSlice.actions;\r\n\r\nexport const selectUser = (state) => state.user.user;\r\n\r\nexport default userSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}